<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase PUT and DELETE</title>
  <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js"></script>
</head>
<body>
  <h1>Firebase Database Operations</h1>

  <h2>Initialize Firebase</h2>
  <form id="firebaseConfig">
    <label for="apiKey">API Key:</label><br>
    <input type="text" id="apiKey" value="AIzaSyDgpXYSDzF-V-cNVdIh_KqQDcyWsco1P48" required><br><br>

    <label for="authDomain">Auth Domain:</label><br>
    <input type="text" id="authDomain" value="cash-tracker-a2731.firebaseapp.com" required><br><br>

    <label for="databaseURL">Database URL:</label><br>
    <input type="text" id="databaseURL" value="https://cash-tracker-a2731-default-rtdb.firebaseio.com" required><br><br>

    <label for="projectId">Project ID:</label><br>
    <input type="text" id="projectId" value="cash-tracker-a2731" required><br><br>

    <button type="button" onclick="initializeFirebase()">Initialize Firebase</button>
  </form>

  <hr>

  <h2>PUT Value</h2>
  <form id="putForm">
    <label for="branchPath">Random Branch Path:</label><br>
    <input type="text" id="branchPath" placeholder="e.g., random/path/123" required><br><br>

    <label for="branchValue">Value:</label><br>
    <input type="text" id="branchValue" placeholder="Enter value" required><br><br>

    <button type="button" onclick="putValue()">PUT Value</button>
  </form>

  <hr>

  <h2>DELETE Value</h2>
  <form id="deleteForm">
    <label for="deletePath">Branch Path to Delete:</label><br>
    <input type="text" id="deletePath" placeholder="e.g., random/path/123" required><br><br>

    <button type="button" onclick="deleteValue()">DELETE Value</button>
  </form>

  <hr>

  <h2>Status</h2>
  <p id="statusMessage">Not connected</p>

  <script>
    let database;

    // Initialize Firebase dynamically
    function initializeFirebase() {
      const apiKey = document.getElementById("apiKey").value;
      const authDomain = document.getElementById("authDomain").value;
      const databaseURL = document.getElementById("databaseURL").value;
      const projectId = document.getElementById("projectId").value;

      const firebaseConfig = {
        apiKey,
        authDomain,
        databaseURL,
        projectId,
      };

      const app = firebase.initializeApp(firebaseConfig);
      database = firebase.database(app);

      document.getElementById("statusMessage").innerText = "Firebase Initialized Successfully!";
    }

    // PUT Value into Firebase
    function putValue() {
      if (!database) {
        alert("Firebase is not initialized. Please initialize Firebase first.");
        return;
      }

      const branchPath = document.getElementById("branchPath").value;
      const branchValue = document.getElementById("branchValue").value;

      database.ref(branchPath).set(branchValue)
        .then(() => {
          document.getElementById("statusMessage").innerText = `Value added at '${branchPath}' successfully!`;
        })
        .catch((error) => {
          document.getElementById("statusMessage").innerText = `Error: ${error.message}`;
        });
    }

    // DELETE Value from Firebase
    function deleteValue() {
      if (!database) {
        alert("Firebase is not initialized. Please initialize Firebase first.");
        return;
      }

      const deletePath = document.getElementById("deletePath").value;

      database.ref(deletePath).remove()
        .then(() => {
          document.getElementById("statusMessage").innerText = `Branch '${deletePath}' deleted successfully!`;
        })
        .catch((error) => {
          document.getElementById("statusMessage").innerText = `Error: ${error.message}`;
        });
    }
  </script>
</body>
</html>
